# ##############################################################################
# DOCKER COMPOSE - TEST ORCHESTRATION
# Generated by DevUtils CLI (https://github.com/fredlackey/devutils-cli)
# ##############################################################################
#
# Usage:
#   docker compose up --build              # Run all platforms
#   docker compose up --build ubuntu       # Run Ubuntu only
#   docker compose run --rm ubuntu bash    # Interactive shell
#
# ##############################################################################

services:
  ubuntu:
    build:
      context: ..
      dockerfile: testing/Dockerfile.ubuntu
    volumes:
      - test-tmp-ubuntu:/tmp
    environment:
      - TEST_PLATFORM=ubuntu
    working_dir: /app
    command: ["/app/testing/scripts/run-tests.sh"]

  debian:
    build:
      context: ..
      dockerfile: testing/Dockerfile.debian
    volumes:
      - test-tmp-debian:/tmp
    environment:
      - TEST_PLATFORM=debian
    working_dir: /app
    command: ["/app/testing/scripts/run-tests.sh"]

  amazonlinux:
    build:
      context: ..
      dockerfile: testing/Dockerfile.amazonlinux
    volumes:
      - test-tmp-amazonlinux:/tmp
    environment:
      - TEST_PLATFORM=amazonlinux
    working_dir: /app
    command: ["/app/testing/scripts/run-tests.sh"]

  fedora:
    build:
      context: ..
      dockerfile: testing/Dockerfile.fedora
    volumes:
      - test-tmp-fedora:/tmp
    environment:
      - TEST_PLATFORM=fedora
    working_dir: /app
    command: ["/app/testing/scripts/run-tests.sh"]

volumes:
  test-tmp-ubuntu:
  test-tmp-debian:
  test-tmp-amazonlinux:
  test-tmp-fedora:
